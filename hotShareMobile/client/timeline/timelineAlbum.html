<template name="timelineAlbum">
<style>
  input,textarea { 
    -webkit-touch-callout: default;
    -webkit-user-select: text; 
    user-select: text;
  }
</style>
<div class="timelineAlbum">
  <div class="head">
    <strong>相册时间轴</strong>
    <div class="leftButton back">
      <i class="fa fa-angle-left fa-fw"></i>
    </div>
    <!--{{#if isMultiSelect}}
    <div id="cancelSelect" class="rightButton" style="padding-top:0;right:48px;">取消</div>
    <div id="confirmSelect" class="rightButton" style="padding-top:0;">确定</div>
    {{else}}
    <div id="multiSelect" class="rightButton" style="padding-top:0;">多选</div>
    {{/if}}-->
  </div>
  <div class="content" style="position: absolute;top: 0;left: 0;bottom: 0;right: 0;overflow-x: hidden;overflow-y: auto;-webkit-overflow-scrolling: touch;">
    {{#if isLoading}}
    <div class="waitForReportIframe" style="position:fixed; width:100%;text-align: center; margin-top:40%; color: black; font-size: 16px;">
      <img src="/loading.gif" width="24px" height="24px"/> 加载中...
    </div>
    {{else}}
    {{#if lists}}
    <ul class="timeLine">
      <div style="color: #FF9800;font-size: 16px;"> 点击头像，选择您的上/下班时间</div>
      <!--{{#each lists}}
      {{#if isShowTime}}
      <div class="timeLine-time"> 
        <span class="dot-normal dot-success"></span>
        <span class="time">{{create_time}}</span>
      </div>
      {{/if}}
        {{#each images}}
        <div class="images" id="{{id}}" data-url="{{url}}" data-type="{{img_type}}" data-label="{{label}}" data-ts="{{../ts}}">
          <img class="lazy" data-original="{{url}}" />
        </div>
        {{/each}}
      {{/each}}-->
      <div class="images video-click-able" id="{{person_id}}" data-name="{{person_name}}" data-imgurl="{{video_post}}" data-ts="{{ts}}" data-tsoffset="{{ts_offset}}">
        <img src="" alt="V-Test" />
        <div class="person-name">{{person_name}}</div>
      </div>
      {{#each lists}}
        <div class="timeLine-time"> 
          <span class="dot-normal dot-success"></span>
          <span class="time">{{formatDate time}}</span>
        </div>
        {{#each images}}
        {{#if app_user_id}}
          {{#if is_video}}
          <div class="images video-no-click" id="{{person_id}}" data-name="{{person_name}}" data-imgurl="{{video_post}}" data-ts="{{ts}}" data-tsoffset="{{ts_offset}}">
            <div class="linked-helper">已选</div>
            <img class="lazy" data-original="{{video_post}}" />
            <div class="person-name">{{person_name}}</div>
          </div>
          {{else}}
          <div class="images images-no-click" id="{{person_id}}" data-name="{{person_name}}" data-imgurl="{{img_url}}" data-sqlid="{{sqlid}}" data-style="{{style}}" data-ts="{{ts}}">
            <div class="linked-helper">已选</div>
            <img class="lazy" data-original="{{img_url}}" />
            <div class="person-name">{{person_name}}</div>
          </div>
          {{/if}}
        {{else}}
          {{#if is_video}}
          <div class="images video-click-able" id="{{person_id}}" data-name="{{person_name}}" data-imgurl="{{video_post}}" data-ts="{{ts}}" data-tsoffset="{{ts_offset}}">
            <img class="lazy" data-original="{{video_post}}" />
            <div class="person-name">{{person_name}}</div>
          </div>
          {{else}}
          <div class="images images-click-able" id="{{person_id}}" data-name="{{person_name}}" data-imgurl="{{img_url}}" data-sqlid="{{sqlid}}" data-style="{{style}}" data-ts="{{ts}}">
            <img class="lazy" data-original="{{img_url}}" />
            <div class="person-name">{{person_name}}</div>
          </div>
          {{/if}}
        {{/if}}
        {{/each}}
      {{/each}}
    </ul>
    {{else}}
    <div style="text-align: center;margin-top: 100px;">暂无数据</div>
    {{/if}}
    {{/if}}
  <!--<div class="loading" style="display:none;text-align:center; margin:10px;"><img src="/loading.gif" width="20">&nbsp;&nbsp;加载中...</div>-->
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="setPicturePersonName" tabindex="-1" role="dialog" aria-labelledby="setPicturePersonNameLabel">
  <div class="modal-dialog" role="document" style="top:50px; bottom:auto;">
    <div class="modal-content">
      <div class="modal-body">
        <div class="form-group">
          <label for="picturePersonName">设置姓名</label>
          <input type="text" class="form-control" id="picturePersonName" placeholder="请输入姓名">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default cancelWhatsUp" data-dismiss="modal">取消</button>
        <button type="button" id="" class="btn btn-primary confirmPersonName">确定</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal END -->

<!-- video preview layer-->
<div class="videoPreviewLayer">
  <div class="videoLayer">
    <video id="timeline-video-preview" class="video-js vjs-default-skin" preload="auto" width="100%" height="100%"
       poster="{{video_post}}" data-setup='{"example_option":true}' webkit-playsinline="true" playsinline="true">
      <source src="http://183.60.197.33/4/n/a/f/y/nafytkwzorwmwhzjtnpxicpcjbbtki/he.yinyuetai.com/88E80159367811983D10442E9386805D.mp4" type='video/mp4' />
      <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
    </video>
  </div>
  <div class="selectVideoButton">选择</div>
</div>
<!-- video preview layer end -->
<script>
$('.videoLayer').on('click',function(){
  VideoPlayer = videojs('#timeline-video-preview')
  VideoPlayer.play();
})
</script>
</template>