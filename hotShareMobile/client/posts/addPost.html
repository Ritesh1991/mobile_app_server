<template name="addPost">
  <div class="addPost">
    <div id="blur_overlay" style="position: absolute; opacity: 0.8; z-index: 1; width:100%; background-color:white;"></div>
    <div id="blur_bottom" style="position: absolute; opacity: 0.8; z-index: 14; width:100%; background-color:white;"></div>
    <div id="blur_left" style="position: absolute; opacity: 0.8; z-index: 14;left:0; background-color:white;"></div>
    <div id="blur_right" style="position: absolute; opacity: 0.8; z-index: 14;right:0; background-color:white;"></div>
    <div class="head">
      {{#if mainImage}}
        {{#if isReviewMode '3'}}
            <div class="leftButton cancleCrop" style="color: #00c4ff;margin-top:0px;">取消</div>
            <div>缩放和裁剪</div>
            <div id="cropDone" class="rightButton" style="color: #00c4ff;margin-top:0px;">完成</div>
        {{/if}}
        {{#if isReviewMode '2'}}
            <div class="leftButton back"><i class="fa fa-angle-left fa-fw"></i></div>
            <div id="publish" class="rightButton">存储</div>
        {{/if}}
        {{#if isReviewMode '1'}}
            <div class="leftButton back"><i class="fa fa-angle-left fa-fw"></i></div>
            <div id="edit" class="secondRightButton" style="color: #00c4ff;margin-top:0px;">编辑</div>
            <div id="delete" class="rightButton" style="color: #00c4ff;margin-top:0px;">删除</div>
        {{/if}}
        {{#if isReviewMode '0'}}
            <div class="leftButton cancle" style="color: #00c4ff;margin-top:0px;">取消</div>
            <div id="saveDraft" class="secondRightButton" style="color: #00c4ff;margin-top:0px;">存储草稿</div>
            <div id="publish" class="rightButton" style="font-weight:bold;color: #00c4ff;margin-top:0px;">发表</div>
        {{/if}}
      {{else}}
      <div class="leftButton cancle"><i class="fa fa-times"></i></div>
        <div>请添加图文</div>
      {{/if}}
    </div>
        <div class="content">
        {{#if mainImage}}
          <div id="wrapper">
            <div class="mainImage" id="{{mainImage._id}}">
              <img id="mainImage{{mainImage._id}}" class="scale item" src="{{mainImage.imgUrl}}" draggable="false" style="min-height: 100%;position:absolute;{{mainImage.style}}" >
              <header>
                <textarea id="title" name="textarea" rows="1" class="title" placeholder="主标题"  oninput="this.style.height='auto'; this.style.height=this.scrollHeight+'px'; ">{{draftTitles.title}}</textarea>
                <textarea id="addontitle" name="textarea" rows="1" class="addontitle" placeholder="副标题" oninput="this.style.height='auto'; this.style.height=this.scrollHeight+'px'; ">{{draftTitles.addontitle}}</textarea>
              </header>
            </div>
            <div id="crop{{mainImage._id}}" class="crop" style="z-index: 12; display:none">
              <div id="default{{mainImage._id}}" class="default"></div>
            </div>
          </div>
        {{/if}}
        <div class="gridster">
            <ul id="display">

                {{#each pub}}
                    {{#if isImage}}
                        <li class='resortitem' id="{{_id}}" data-row="{{data_row}}" data-col="{{data_col}}" data-sizex="{{data_sizex}}" data-sizey="{{data_sizey}}">
                          <div id="isImage{{_id}}" class="isImage" style="width:100%; height:100%;">
                            <div class="imgContainer">
                              <img src="{{imgUrl}}" style="object-fit: cover; width:100%; height:100%;position:absolute;{{style}}" cropStyle="{{style}}" onload="$(this).parent().actImageFitCover('cropStyle');" >
                            </div>
                            <i class="fa fa-circle" style="position: absolute;bottom: -12px;left: 50%;opacity: 0;"></i>
                            <i class="fa fa-circle" style="position: absolute;bottom: -10px;right: -10px;opacity: 0;"></i>
                            <i class="fa fa-circle" style="position: absolute;right: -11px;top: 50%;opacity: 0;"></i>
                          </div>
                          <div id="crop{{_id}}" class="crop" style="display:none">
                            <div id="default{{_id}}" class="default"></div>
                          </div>
                        
<!--                        {{crop imgUrl}}-->
                        </li>
                    {{else}}
                        <li class='resortitem hastextarea' id="{{_id}}" data-row="{{data_row}}" data-col="{{data_col}}" data-sizex="{{data_sizex}}" data-sizey="{{data_sizey}}">
                            <div class="textdiv">
                                <textarea data-autoresize rows="1" id="{{_id}}TextArea" text={{_id}} name="textarea" readOnly="true" style="font-size:large;{{style}}" >{{text}}</textarea>
                            </div>
                        </li>
                    {{/if}}
                {{/each}}
            </ul>
        </div>
      </div>

      <div class="linkInputBox">
        <input type="text" class="form-control form-group-material-light-blue" id="linkToBeInserted">
        <button class="btn btn-material-light-blue btn-lg" id="pasteLink">黏贴链接</button>
        <button class="btn btn-material-light-blue btn-lg" id="insertLink">插入链接</button>
      </div>
      <div id="mainImage-toolbar-options" style='visibility: hidden;'>
          <a href="#" id='modify'><i class="fa fa-pencil"></i></a>
          <a href="#" id='crop'><i class="fa fa-crop"></i></a>
      </div>
      <div id="image-toolbar-options" style='visibility: hidden;'>
        <a href="#" id='crop'><i class="fa fa-crop"></i></a>
        <a href="#" id='del'><i class="fa fa-trash"></i></a>
      </div>
      <div id="text-toolbar-options" style='visibility: hidden;'>
        <a href="#" id='modify'><i class="fa fa-pencil"></i></a>
        <a href="#" id='font'><i class="fa fa-font"></i></a>
        <a href="#" id='align'><i class="fa fa-align-left"></i></a>
        <a href="#" id='del'><i class="fa fa-trash"></i></a>
      </div>
      <div id="text-align-toolbar-options" style='visibility: hidden;'>
        <a href="#" id='aligntoleft'><i class="fa fa-align-left"></i></a>
        <a href="#" id='aligntocenter'><i class="fa fa-align-center"></i></a>
        <a href="#" id='aligntoright'><i class="fa fa-align-right"></i></a>
      </div>
      <div id="text-font-toolbar-options" style='visibility: hidden;'>
        <a href="#" id='font-normal' style="font-family: Copernicus-Book, serif;font-size: 120%;font-style: normal;color:white;font-variant: normal;font-weight: normal;">正常</a>
        <a href="#" id='font-quato' style="font-family: MarkWeb-ExtraLight, sans-serif;font-style: normal;font-variant: normal;color:white;font-weight: normal;font-size:120%">引用</a>
      </div>
    {{#if showPostFooter}}
        <div id="postFooter">
          <div id="addmore">
            <i class="fa fa-picture-o"></i>
          </div>
          <div id="takephoto">
            <i class="fa fa-camera"></i>
          </div>
          <div id="addText">
            <i class="fa fa-pencil-square-o"></i>
          </div>
          <div id="addLink">
            <i class="fa fa-link"></i>
          </div>
        </div>
        <div class="addProgress" style="display:none">
          {{> progressBar}}
        </div>
    {{/if}}
  </div>
</template>
