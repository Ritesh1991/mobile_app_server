<template name="footer">
  {{> chooseAssociatedUserFooter}}
  {{#if display_footer}}
    <div id="footer" class="navbar navbar-default navbar-fixed-bottom">
        <div class="btn-group btn-group-justified" style="margin:0">
            <div class="btn-group">
              <a id="home" class="foot-btn btn btn-default {{focus_style 'home'}}">
                <i class="fa fa-home" style="font-size: 26px;"></i>
                <div class="footerName">{{_ "homePage"}}</div>
              </a>
            </div>
            <div class="btn-group">
              <a id="search" class="foot-btn btn btn-default {{focus_style 'search'}}">
                <i class="fa fa-search" style="font-size: 24px;"></i>
                <div class="footerName">{{_ "discovery"}}</div>
              </a>
            </div>
            <div class="btn-group">
                <div id="add" data-toggle="modal" data-target="#level2-popup-menu" class="foot-btn btn btn-default {{focus_style 'add'}}">
                  <!--<i class="fa fa-plus" style="font-size: 32px; color:#FFF;padding-top: 10px;"></i>-->
                  <!--<i class="fa fa-plus" style="font-size: 32px; padding-top: 10px;"></i>-->
                  <img src="/theme_blue/add.svg" style="height:50px;margin-top:-2px;"/>
                </div>
            </div>
            <div class="btn-group">
              <a id="bell" class="foot-btn btn btn-default {{focus_style 'bell'}}">
                <i class="fa fa-bell" style="font-size: 22px;"></i>
                <div class="footerName">{{_ "message"}}</div>
                {{#if is_wait_read_count wait_read_count}}
                  {{#if limit_top_read_count wait_read_count}}
                  <div class="msg_count">99+</div>
                  {{else}}
                  <div class="msg_count">{{wait_read_count}}</div>
                  {{/if}}
                {{/if}}
              </a>
            </div>
            <div class="btn-group">
              <a id="user" class="foot-btn btn btn-default {{focus_style 'user'}}">
                <i class="fa fa-user" style="font-size: 24px;"></i>
                <div class="footerName">{{_ "me"}}</div>
              </a>
            </div>
        </div>
    </div>
    <div id="level2-popup-menu" class="modal bottom" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <!--
                <div class="modal-header">
                    <h4 class="modal-title">Dialog</h4>
                </div>-->
                <button type="button" id="album-select" class="btn btn-default">{{_ "selectPicFromGallery"}}</button>
                <button type="button" id="web-import" class="btn btn-default">{{_ "importFromPaster"}}</button>
                {{#if wait_import_count}}
                <button type="button" id="share-import" class="btn btn-default">{{_ "importFromShareExtension"}}</button>
                {{/if}}
                <button type="button" id="photo-select" class="btn btn-default">{{_ "takePicture"}}</button>
            </div>
        </div>
    </div>
  {{/if}}
  {{#if display_select_import_way}}
    {{> selectImportWay}}
  {{/if}}
  <script>
    $(document).ready(function(){
      $('#level2-popup-menu').on('hide.bs.modal', function(e) {
        $('#add').removeClass('focus')
      }).on('show.bs.modal', function(e) {
        $('#add').addClass('focus')
      });
    });
  </script>
</template>

<template name="selectImportWay">
  <div id="mask"></div>
  <div class="selectImportWay">
    <div class="importWayheader">
      <div class="importWayTitle"><img src="/import-tip.png" width="40px"/>小贴士</div>
      <div class="importWayContent">快速导入速度飞快，适用大部分链接导入。如果导入不成功，请继续使用高级导入完成文章导入。</div>
    </div>
    <div class="importWayFooter">
      <div class="importWayBtn" id="appImport">高级导入</div>
      {{#if hasAssocaitedUsers}}
      <div class="importWayBtn importWayBtnLight" id="" data-toggle="modal" data-target="#chooseAssociatedUserFooter">快速导入</div>
      {{else}}
      <div class="importWayBtn importWayBtnLight" id="serverImport">快速导入</div>
      {{/if}}
    </div>
  </div>
</template>

<template name="chooseAssociatedUserFooter">
  <div class="modal fade" id="chooseAssociatedUserFooter" tabindex="-1" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">选择帐号</h4>
        </div>
        <div class="modal-body">
          <dl>
            <dt class="active" userId="{{currentUser._id}}"><img src="{{currentUser.profile.icon}}" alt="Avatar"><i class="fa fa-check-circle"></i></dt>
            <dd>
                {{#if currentUser.profile.fullname}}
                    {{currentUser.profile.fullname}}
                {{else}}
                    {{currentUser.username}}
                {{/if}}
            </dd>
          </dl>
          {{#each accountList}}
            <dl>
              <dt userId="{{toUserId}}" userIcon="{{toIcon}}" userName="{{toName}}"><img src="{{toIcon}}" alt="Avatar"><i class="fa fa-check-circle"></i></dt>
              <dd>
                  {{toName}}
              </dd>
            </dl>
          {{/each}}          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
          <button type="button" id="chooseUserFooter" class="btn btn-primary">导入</button>
        </div>
      </div>
    </div>
  </div>
</template>