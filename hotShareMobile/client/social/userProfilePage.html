
<template name="userProfilePageOnly">
    {{> showUserIconBigPic}}
  <div class="userProfile userProfileMarginTop">
    <div class="head">
      <div id="userProfileBack" class="leftButton back"><i class="fa fa-angle-left fa-fw"></i></div>
      {{#if profile.profile.fullname}}
        <div>{{profile.profile.fullname}}</div>
      {{else}}
        <div>{{profile.username}}</div>
      {{/if}}
    </div>
    <div class="userProfileTop">
        <img class="icon" src="{{profile.profile.icon}}" width='70' height='70'>
          <span class="userName">
          {{#if profile.profile.fullname}}
              {{profile.profile.fullname}}
          {{else}}
              {{profile.username}}
          {{/if}}
            {{#if isMale profile.profile.sex}}
              <img src="/male.png" width='20' height='20'>
            {{/if}}
            {{#if isFemale profile.profile.sex}}
              <img src="/female.png" width='20' height='20'>
            {{/if}}
          </span>
        <span class="location">{{location}}</span>
        <span class="desc">{{profile.profile.desc}}</span>
        {{#unless isMyself}}
            {{#if isFollowedTheAuthor}}
            <div id="unFollowAuthor" class="followMe" style="border:none;">
                <div class="followBtn"><i class="fa fa-check"></i>&nbsp;{{_ "unFollow"}}</div>
            </div>
            {{else}}
            <div id="followAuthor" class="followMe">
                <div class="followBtn"><i class="fa fa-plus"></i>&nbsp;{{_ "follow"}}</div>
            </div>
            {{/if}}
        {{/unless}}
    </div>
    <div class="showPostsLine"></div>
    <div class="post">
      <span class="postLeft">{{_ "recentlyviewedstories"}}</span>
    </div>
      {{#if compareViewsCount 0}}
        <div class="postImages swipe-control">
          <ul>
            {{#each viewLists}}
              {{#if postId}}
                <li id="{{postId}}">
                  <div class="postMainImage" style="background-image:url({{mainImage}})"></div>
                  <h6 class="title" style="text-overflow:ellipsis; white-space:nowrap; overflow:hidden;">
                     {{title}}
                  </h6>
                </li>
              {{/if}}
          {{/each}}
          </ul>
        </div>
      {{/if}}
      <div class="showPostsLine" style="height: auto;padding: 10px 20px;">
        {{#unless isMyself}}
        <div class="chatToUser" userprofile='{{profile.profile.fullname}}' username='{{profile.username}}' style="height: 40px;background: #1ab20a;color: #fff;line-height: 40px;border-radius: 4px;text-align: center;letter-spacing: 2px;font-size: 16px;">发消息</div>
        {{/unless}}
      </div>
      {{#if hasFavoritePosts}}
      <div class="post">
          <span class="postLeft">{{_ "FavoriteStory"}}</span>
      </div>
      {{>favoritePostsOnly}}
      {{/if}}
  </div>
</template>


<template name="favoritePostsOnly">
        <div class="favoritePosts1">
          {{#if loading}}
              <div>{{_ "isLoading"}}</div>
          {{/if}}
          {{#if loadError}}
              <div>{{_ "FailToLoad"}}</div>
          {{/if}}
          {{#newLayoutContainer layoutId=onPostId src="favoritePosts1" container=".favoritePosts1"}}
            {{#each favoritePostsOnly}}
              {{#newLayoutElement layoutId=onPostId displayId=_id src="favoritePosts1" container=".favoritePosts1"}}
                  <div class="img_placeholder">
                      <img class="mainImage" src="{{mainImage}}" />
                  </div>
                  <div class="pin_content">
                      <p class="title">{{title}}</p>
                      <p class="addontitle">{{addontitle}}</p>
                  </div>
              {{/newLayoutElement}}
            {{/each}}
          {{/newLayoutContainer}}
          {{#if isLoading}}
              <div class="loading-spinner">
                  <div class='spinner-overlay'>
                      <div class='spinner center'>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                          <div class='spinner-blade'></div>
                      </div>
                  </div>
              </div>
          {{/if}}
        </div>
    </template>