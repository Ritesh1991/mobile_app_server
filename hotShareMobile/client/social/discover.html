<template name="discover">
  <div class="comFadeIn discover">
    {{#if hasDiscover}}
      <!--朋友圈 start-->
      <div class="disTop">
        <div class="disBg"></div>
        <div class="disLeft">
          <p class="disname">朋友圈</p>
          {{#if NoMoments}}
              <p class="disdesc">看过当前帖子的朋友看过的帖子，您都看过了，特意为您推荐以下您没看过帖子...</p>
          {{else}}
              <p class="disdesc">看过当前帖子的朋友，还看过...</p>
          {{/if}}
        </div>
      </div>
      {{>lpcomments}}
      {{>moments}}
      <!--朋友圈 end-->
    {{/if}}
  </div>
</template>
<template name="lpcomments">
    <div class="lpcomments">
        <div id="wrapper">
            {{#each lpcomments}}
                <div id="list">
                    <div class="icon">
                        <img src="{{ownerIcon}}" width="40" height="40"/>
                    </div>
                    <div class="user_name">
                        <h2>{{ownerName}}&nbsp;<span>{{description}}</span></h2>
                        <div class="readpost">
                            <dl>
                                <dt>
                                    <img class="post_pic" src="{{mainImage}}" width="40" height="40"/>
                                    <div class="red_spot"></div>
                                </dt>
                                <dd>{{postTitle}}  {{addontitle}}</dd>
                            </dl>
                        </div>
                        <span style="margin:0;">{{time_diff createdAt}}</span>
                            {{#if withSuggestAlreadyRead}}<button class="lpAlreadyRead" style="float: right;border: none;background-color: #fff;color: rgb(7, 81, 154);">已读过</button>{{/if}}
                    </div>
                    <div class="clear"></div>
                </div>
            {{/each}}
        </div>
    </div>
</template>
<template name="moments">
      <div class="moments">
            {{#if loading}}
                <div>正在加载中...</div>
            {{/if}}
            {{#if loadError}}
                <div>加载失败，请检查网络设置或稍后重试</div>
            {{/if}}
            {{#if newLayoutMoment}}
                {{#newLayoutContainer layoutId=onPostId }}
                    {{#if showSuggestPosts}}
                    {{#each suggestPosts}}
                        {{#newLayoutElement layoutId=onPostId displayId=_id}}
                            <div class="img_placeholder">
                                <img class="mainImage" src="{{mainImage}}" />
                            </div>
<!--                                <header>
                              <p class="title">{{title}}</p>
                              <p class="addontitle">{{addontitle}}</p>
                            </header>-->
                            <div class="pin_content">
<!--                                  <span><img class="userIcon" src="{{userIcon}}" width="35" height="35" /></span>-->
                              <p class="title">{{title}}</p>
                              <p class="addontitle">{{addontitle}}</p>
                              <h1 class="username">{{ownerName}}  <span>发布</span>
                                {{#if withSuggestAlreadyRead}}
                                <div name="suggestAlreadyRead" class="alreadyReadBtn" style="bottom: 1px;float: right;margin-right: 10px;border: none;position: relative;height: 16px;width: 16px;">
                                  <img style="background-color: #fff;" class="icon" name="suggestAlreadyRead" src="/closeBtn.png" width="16" height="16">
                                </div>
                                {{/if}}</h1>
<!--                                  <h2>发布了一个故事</h2>-->
<!--                                  <b>{{time_diff createdAt}}</b>-->
                            </div>
                        {{/newLayoutElement}}
                    {{/each}}
                    {{/if}}
                    {{#each moments}}
                        {{#newLayoutElement layoutId=onPostId displayId=readPostId}}
                            <div class="img_placeholder">
                                <img class="mainImage" src="{{mainImage}}" />
                            </div>
<!--                                <header>
                              <p class="title">{{title}}</p>
                              <p class="addontitle">{{addontitle}}</p>
                            </header>-->
                            <div class="pin_content">
                              <p class="title">{{title}}</p>
                              <p class="addontitle">{{addontitle}}</p>
<!--                                  <span><img class="userIcon" src="{{userIcon}}" width="35" height="35" /></span>-->
<!--                                  <h2>阅读了一个故事</h2>-->
<!--                                  <b>{{time_diff createdAt}}</b>-->
                            </div>
                            <h1 class="username">{{username}}  <span>读过</span>
                              {{#if withSuggestAlreadyRead}}
                              <div name="postAlreadyRead" class="alreadyReadBtn" style="bottom: 1px;float: right;margin-right: 10px;border: none;position: relative;height: 16px;width: 16px;">
                                <img style="background-color: #fff;" name="postAlreadyRead" class="icon" src="/closeBtn.png" width="16" height="16">
                              </div>
                              {{/if}}
                            </h1>
                        {{/newLayoutElement}}
                    {{/each}}
                {{/newLayoutContainer}}
                {{#if isLoading}}
                    <div class="loading-spinner">
                        <div class='spinner-overlay'>
                            <div class='spinner center'>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                                <div class='spinner-blade'></div>
                            </div>
                        </div>
                    </div>
                {{/if}}
            {{else}}
                <div id="wrapper">
                    {{#if NoMoments}}
                        {{#each suggestPosts}}
                            <div id="list">
                                <div class="icon">
                                    <img src="{{ownerIcon}}" width="40" height="40"/>
                                </div>
                                <div class="user_name">
                                    <h2>{{ownerName}}&nbsp;<span>发布了一个故事</span></h2>
                                    <div class="readpost">
                                        <dl>
                                            <dt>
                                                <img class="post_pic" src="{{mainImage}}" width="40" height="40"/>
                                            </dt>
                                            <dd>{{title}}  {{addontitle}}</dd>
                                        </dl>
                                    </div>
                                    <p>{{time_diff createdAt}}</p>
                                </div>
                                <div class="clear"></div>
                            </div>
                        {{/each}}
                    {{else}}
                        {{#each moments}}
                            <div id="list">
                                <div class="icon">
                                    <img src="{{userIcon}}" width="40" height="40"/>
                                </div>
                                <div class="user_name">
                                    <h2>{{username}}&nbsp;<span>阅读了一个故事</span></h2>
                                    <div class="readpost">
                                        <dl>
                                            <dt>
                                                <img class="post_pic" src="{{mainImage}}" width="40" height="40"/>
                                            </dt>
                                            <dd>{{title}}  {{addontitle}}</dd>
                                        </dl>
                                    </div>
                                    <p>{{time_diff createdAt}}</p>
                                </div>
                                <div class="clear"></div>
                            </div>
                        {{/each}}
                    {{/if}}
                    {{#if moreResults}}
                        <div id="showMoreMomentsResults" style="margin-left: 25px;">
                            <span class="loading">加载中...</span>
                        </div>
                    {{/if}}
                </div>
            {{/if}}
      </div>
</template>
