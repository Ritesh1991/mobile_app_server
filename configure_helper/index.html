<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NVR Config Helper</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    IP Address of NVR:<br>
    <input type="text" name="ip" id="ip"><br>
    Username of NVR:<br>
    <input type="text" name="username" id="username"><br>
    Password of NVR:<br>
    <input type="password" name="password" id="password"><br>

    <select id='channel'>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
    </select>

    <!-- 1. Define some markup -->
    <button class="btn">Copy</button>
    <!-- 2. Include library -->
    <script src="clipboard.min.js"></script>

    <!-- 3. Instantiate clipboard -->
    <script>
    var json_config = {
       "mode":"start",
       "mid":"Lorex_",
       "name":"Lorex_",
       "type":"h264",
       "protocol":"rtsp",
       "host":"192.168.0.11",
       "port":"554",
       "path":"/cam/realmonitor?channel=4&subtype=0",
       "ext":"mp4",
       "fps":"1",
       "width":"854",
       "height":"480",
       "details":"{\"notes\":\"\",\"dir\":\"\",\"auto_host_enable\":\"0\",\"auto_host\":\"\",\"rtsp_transport\":\"tcp\",\"muser\":\"admin\",\"mpass\":\"abc123\",\"port_force\":\"1\",\"fatal_max\":\"0\",\"aduration\":\"100000\",\"probesize\":\"100000\",\"stream_loop\":\"0\",\"sfps\":\"1\",\"accelerator\":\"0\",\"hwaccel\":null,\"hwaccel_vcodec\":\"\",\"hwaccel_device\":\"\",\"stream_type\":\"jpeg\",\"stream_flv_type\":null,\"stream_flv_maxLatency\":\"\",\"stream_mjpeg_clients\":\"\",\"stream_vcodec\":\"copy\",\"stream_acodec\":\"no\",\"hls_time\":\"2\",\"hls_list_size\":\"3\",\"preset_stream\":\"ultrafast\",\"signal_check\":\"10\",\"signal_check_log\":\"0\",\"stream_quality\":\"15\",\"stream_fps\":\"2\",\"stream_scale_x\":\"\",\"stream_scale_y\":\"\",\"rotate_stream\":\"no\",\"svf\":\"\",\"tv_channel\":\"0\",\"tv_channel_id\":\"\",\"tv_channel_group_title\":\"\",\"stream_timestamp\":\"0\",\"stream_timestamp_font\":\"\",\"stream_timestamp_font_size\":\"\",\"stream_timestamp_color\":\"\",\"stream_timestamp_box_color\":\"\",\"stream_timestamp_x\":\"\",\"stream_timestamp_y\":\"\",\"stream_watermark\":\"0\",\"stream_watermark_location\":\"\",\"stream_watermark_position\":\"tr\",\"snap\":\"1\",\"snap_fps\":\"\",\"snap_scale_x\":\"\",\"snap_scale_y\":\"\",\"snap_vf\":\"\",\"vcodec\":\"copy\",\"crf\":\"1\",\"preset_record\":\"\",\"acodec\":\"no\",\"dqf\":\"0\",\"cutoff\":\"15\",\"rotate_record\":\"no\",\"vf\":\"\",\"timestamp\":\"0\",\"timestamp_font\":\"\",\"timestamp_font_size\":\"10\",\"timestamp_color\":\"white\",\"timestamp_box_color\":\"0x00000000@1\",\"timestamp_x\":\"(w-tw)/2\",\"timestamp_y\":\"0\",\"watermark\":\"0\",\"watermark_location\":\"\",\"watermark_position\":\"tr\",\"cust_input\":\"\",\"cust_snap\":\"\",\"cust_rtmp\":\"\",\"cust_rawh264\":\"\",\"cust_detect\":\"-qscale:v 2\",\"cust_stream\":\"\",\"cust_stream_server\":\"\",\"cust_record\":\"\",\"custom_output\":\"\",\"detector\":\"1\",\"detector_pam\":\"0\",\"detector_noise_filter\":null,\"detector_webhook\":\"0\",\"detector_webhook_url\":\"\",\"detector_command_enable\":\"0\",\"detector_command\":\"\",\"detector_command_timeout\":\"\",\"detector_lock_timeout\":\"1000\",\"detector_save\":\"0\",\"detector_frame_save\":\"0\",\"detector_mail\":\"0\",\"detector_mail_timeout\":\"\",\"detector_record_method\":\"hot\",\"detector_trigger\":\"0\",\"detector_trigger_record_fps\":\"\",\"detector_timeout\":\"10\",\"watchdog_reset\":\"0\",\"detector_delete_motionless_videos\":\"0\",\"detector_send_frames\":\"1\",\"detector_region_of_interest\":\"1\",\"detector_fps\":\"5\",\"detector_scale_x\":\"854\",\"detector_scale_y\":\"480\",\"detector_use_motion\":\"1\",\"detector_use_detect_object\":\"0\",\"detector_frame\":\"1\",\"detector_sensitivity\":\"0.5\",\"cords\":\"{\\\"MhXol\\\":{\\\"name\\\":\\\"MhXol\\\",\\\"sensitivity\\\":\\\"15\\\",\\\"points\\\":[]},\\\"BVzAg\\\":{\\\"name\\\":\\\"BVzAg\\\",\\\"sensitivity\\\":0.0005,\\\"points\\\":[[\\\"329\\\",\\\"61\\\"],[\\\"355\\\",\\\"711\\\"],[\\\"1205\\\",\\\"717\\\"],[\\\"1029\\\",\\\"280\\\"],[\\\"1079\\\",\\\"175\\\"],[\\\"1247\\\",\\\"69\\\"],[\\\"391\\\",\\\"70\\\"]]},\\\"J68B5\\\":{\\\"name\\\":\\\"J68B5\\\",\\\"sensitivity\\\":0.0005,\\\"points\\\":[[\\\"45\\\",\\\"49\\\"],[\\\"39\\\",\\\"476\\\"],[\\\"777\\\",\\\"474\\\"],[\\\"690\\\",\\\"194\\\"],[\\\"781\\\",\\\"46\\\"],[\\\"145\\\",\\\"49\\\"]]},\\\"CZDAM\\\":{\\\"name\\\":\\\"CZDAM\\\",\\\"sensitivity\\\":\\\"15\\\",\\\"points\\\":[[\\\"31\\\",\\\"59\\\"],[\\\"105\\\",\\\"65\\\"],[\\\"832\\\",\\\"49\\\"],[\\\"710\\\",\\\"171\\\"],[\\\"758\\\",\\\"475\\\"],[\\\"31\\\",\\\"477\\\"]]},\\\"5CQVl\\\":{\\\"name\\\":\\\"5CQVl\\\",\\\"sensitivity\\\":0.0005,\\\"points\\\":[[\\\"30\\\",\\\"46\\\"],[\\\"62\\\",\\\"463\\\"],[\\\"745\\\",\\\"460\\\"],[\\\"711\\\",\\\"56\\\"]]},\\\"dKAPZ\\\":{\\\"name\\\":\\\"dKAPZ\\\",\\\"sensitivity\\\":0.0005,\\\"points\\\":[[\\\"18\\\",\\\"47\\\"],[\\\"18\\\",\\\"147\\\"],[\\\"118\\\",\\\"47\\\"]]},\\\"5WNDV\\\":{\\\"name\\\":\\\"5WNDV\\\",\\\"sensitivity\\\":0.0005,\\\"points\\\":[[\\\"23\\\",\\\"72\\\"],[\\\"23\\\",\\\"172\\\"],[\\\"756\\\",\\\"464\\\"],[\\\"123\\\",\\\"72\\\"]]},\\\"DN8fV\\\":{\\\"name\\\":\\\"DN8fV\\\",\\\"sensitivity\\\":0.0005,\\\"points\\\":[[\\\"0\\\",\\\"0\\\"],[\\\"0\\\",\\\"100\\\"],[\\\"100\\\",\\\"0\\\"]]}}\",\"detector_buffer_vcodec\":\"auto\",\"detector_buffer_fps\":\"\",\"detector_buffer_hls_time\":\"\",\"detector_buffer_hls_list_size\":\"\",\"detector_buffer_start_number\":\"\",\"detector_buffer_live_start_index\":\"\",\"detector_lisence_plate\":\"0\",\"detector_lisence_plate_country\":\"us\",\"detector_notrigger\":\"0\",\"detector_notrigger_mail\":\"0\",\"detector_notrigger_timeout\":\"\",\"control\":\"0\",\"control_base_url\":\"\",\"control_url_method\":null,\"control_stop\":\"0\",\"control_url_stop_timeout\":\"\",\"control_url_center\":\"\",\"control_url_left\":\"\",\"control_url_left_stop\":\"\",\"control_url_right\":\"\",\"control_url_right_stop\":\"\",\"control_url_up\":\"\",\"control_url_up_stop\":\"\",\"control_url_down\":\"\",\"control_url_down_stop\":\"\",\"control_url_enable_nv\":\"\",\"control_url_disable_nv\":\"\",\"control_url_zoom_out\":\"\",\"control_url_zoom_out_stop\":\"\",\"control_url_zoom_in\":\"\",\"control_url_zoom_in_stop\":\"\",\"groups\":\"[]\",\"loglevel\":\"warning\",\"sqllog\":\"0\",\"detector_cascades\":\"\",\"stream_channels\":\"\",\"input_maps\":\"\",\"input_map_choices\":\"\"}",
       "shto":"[]",
       "shfr":"[]"
    }
    var clipboard = new ClipboardJS('.btn', {
        text: function() {
          var details = JSON.parse(json_config.details)
          var ip = document.getElementById("ip").value
          var username = document.getElementById("username").value
          var password = document.getElementById("password").value
          var channel = document.getElementById("channel").value
          if(ip === "" || username==="" || password==""){
            alert('Please complete this form for setup')
            return
          }
          json_config.host = ip

          json_config.mid = "Lorex_" + channel
          json_config.name = "Lorex_" + channel

          json_config.path = "/cam/realmonitor?channel="+ channel +"&subtype=0"

          details.muser = username
          details.mpass = password
          json_config.details = JSON.stringify(details)

          return JSON.stringify(json_config)
        }
    });
    clipboard.on('success', function(e) {
        console.log(e);
    });
    clipboard.on('error', function(e) {
        console.log(e);
    });
    </script>
</body>
</html>
